<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Welcome to Dragon travels</title>
</head>

<body>
    <div id="success" class="alert alert-success alert-dismissible fade show" role="alert">
        <strong>Success!</strong> Your travel request has been successfully submitted.
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <div id="failure" class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>Error!</strong> Your travel request has not been sent due to errors.
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <div class="container">
        <h1>Dragon Travel desk</h1>

        <div class="mb-3">
            <label for="name" class="form-label">Username</label>
            <input type="text" class="form-control " id="name" placeholder="Enter Your username">
            <small id="namevalid" class="invalid-feedback ">Your username must be 2-10 characters long and should not
                start with number</small>
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email address</label>
            <input type="text" class="form-control" id="email" placeholder="Enter Your email">
            <small id="emailvalid" class="invalid-feedback ">Your email must be a valid email</small>
        </div>
        <div class="mb-3">

            <label for="car" class="form-label">Select Your Car</label>
            <select class="form-select" aria-label="Default select example" id="car">
                <option value="1">Omni</option>
                <option value="2">Maruti 800</option>
                <option value="3">Ford Titanium</option>
                <option value="4">Audi A4</option>
            </select>
        </div>
        <div class="mb-3">

            <label for="address" class="form-label">Example Your address</label>
            <textarea class="form-control" name="address" id="address" cols="30" rows="3"></textarea>
        </div>
        <div class="mb-3">
            <label for="phone" class="form-label">Enter your phone number</label>
            <input type="phone" class="form-control" id="phone" placeholder="Enter Your phone number">
            <small id="phonevalid" class="invalid-feedback ">Your phone number must be 10 digits long</small>
        </div>

        <div class="mb-3">
            <label for="exampleFormControlTextarea1" class="form-label">Any other message...</label>
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
        </div>

        <button class="btn btn-primary" id="submit">submit</button>
    </div>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>


    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
    <script>
    console.log("This is project 4");
$('#success').hide();
$('#failure').hide();

const name1 = document.getElementById('name');
const email = document.getElementById('email');
const phone = document.getElementById('phone');
let validName = false;
let validEmail = false;
let validPhone = false;

// console.log(name1, email, phone); 
name1.addEventListener('input', () => {
    console.log("name is blurred");
    //validate name here;
    let regex = /^[a-zA-Z]([0-9a-zA-Z]){1,10}(\s+)?$/g;
    let str = name1.value;
    console.log(regex, str);

    if (regex.test(str)) {
        console.log(regex.exec(str));
        console.log('%cIt matched', style = 'color: green');
        if (name1.classList.contains('is-invalid')) {
            name1.classList.remove('is-invalid');
        }
        console.log("Your name is valid");
        validName = true;
    }
    else {
        console.log('%cNo matched', style = 'color: red');
        name1.classList.add('is-invalid');
        validName = false;
    }
})

email.addEventListener('input', () => {
    // console.log("name is blurred");
    console.log("email is blurred");
    //validate name here;

    // let regex = /^[a-zA-Z]((\w+)?@\w+\.\w+)$/;
    let regex = /^([_\-\.0-9a-zA-Z]+)@([_\-\.0-9a-zA-Z]+)\.([a-zA_Z]){2,7}$/;

    let str = email.value;
    console.log(regex, str);

    if (regex.test(str)) {
        console.log(regex.exec(str));
        console.log('%cIt matched', style = 'color: green');
        if (email.classList.contains('is-invalid')) {
            email.classList.remove('is-invalid');
        }
        console.log("Your email is valid");
        validEmail = true;
    }
    else {
        console.log('%cNo matched', style = 'color: red');
        email.classList.add('is-invalid');
        validEmail = false;
    }
    //validate email here;
})

phone.addEventListener('input', () => {
    // console.log("name is blurred");
    console.log("phone is blurred");
    //validate name here;
    let regex = /^([0-9]){10}$/;
    let str = phone.value;
    console.log(regex, str);

    if (regex.test(str)) {
        console.log(regex.exec(str));
        console.log('%cIt matched', style = 'color: green');
        if (phone.classList.contains('is-invalid')) {
            phone.classList.remove('is-invalid');
        }
        console.log("Your phone is valid");
        validPhone = true;
    }
    else {
        console.log('%cNo matched', style = 'color: red');
        phone.classList.add('is-invalid');
        validPhone = false;
    }
    //validate phone here;
})

let submit = document.getElementById('submit');
submit.addEventListener('click', () => {
    console.log("You Clicked on submit");
    //submit your form here;
    if (validName && validEmail && validPhone) {
        console.log("Phone, email and User are valid. Submitting the form");

        // let success = document.getElementById('success');
        // success.classList.add('show');
        // let failure = document.getElementById('failure');
        // failure.classList.remove('show');
        // $('#failure').alert('close');
        $('#failure').hide();
        $('#success').show();
    }
    else {
        console.log("Phone, email and User are not valid. Hence not submitting the form. Please correct the errors and try again.");
        // let failure = document.getElementById('failure');
        // failure.classList.add('show');
        // success.classList.remove('show');
        // $('#success').alert('close');
        $('#success').hide();
        $('#failure').show();
    }

})
    </script>

</body>

</html>
